<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Find a Surf Group</title>
    <link rel="stylesheet" href="css/groups.css"/>
</head>
<body>
    <jsp:include page="header.jsp"/>
    <div class="groups-wrapper">
        <div class="groups-header">
            <h1>Find a Surf Group</h1>
            <div class="header-actions">
                <button id="search-btn" class="search-action-btn">Search</button>
                <button class="create-group-btn">Create Group</button>
            </div>
        </div>
        <div class="group-cards-container">
            <!-- Sample Group Card 1 -->
            <div class="group-card" data-from="seoul" data-to="yangyang" data-date="2024-08-10">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">Surfer_Kim</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Seoul (Gangnam)</p>
                    <p><strong>To:</strong> Yangyang (Jukdo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-10</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>

            <!-- Sample Group Card 2 -->
            <div class="group-card" data-from="busan" data-to="goseong" data-date="2024-08-11">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">Wave_Rider</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Busan (Haeundae)</p>
                    <p><strong>To:</strong> Goseong (Songjiho Beach)</p>
                    <p><strong>Date:</strong> 2024-08-11</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>

            <!-- Sample Group Card 3 -->
            <div class="group-card" data-from="incheon" data-to="taean" data-date="2024-08-12">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">Pado_Sori</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Incheon</p>
                    <p><strong>To:</strong> Taean (Mallipo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-12</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
             <!-- Sample Group Card 4 -->
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            <div class="group-card" data-from="daegu" data-to="pohang" data-date="2024-08-15">
                <div class="card-header">
                    <div class="user-avatar"></div>
                    <span class="user-name">BeachLover</span>
                </div>
                <div class="group-info">
                    <p><strong>From:</strong> Daegu</p>
                    <p><strong>To:</strong> Pohang (Wolpo Beach)</p>
                    <p><strong>Date:</strong> 2024-08-15</p>
                </div>
                <button class="join-btn">View Details</button>
            </div>
            
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal-wrapper" style="display: none">
        <div id="search-modal" class="search-modal-overlay" >
            <div class="search-modal-content">
                <span class="close-btn">&times;</span>
                <h2>Search for a Group</h2>
                <form id="group-search-form">
                    <div class="search-input-group">
                        <label for="from-location">From</label>
                        <input type="text" id="from-location" placeholder="e.g., Seoul">
                    </div>
                    <div class="search-input-group">
                        <label for="to-location">To</label>
                        <input type="text" id="to-location" placeholder="e.g., Yangyang">
                    </div>
                    <div class="search-input-group">
                        <label for="search-date">Date</label>
                        <input type="date" id="search-date">
                    </div>
                    <button type="submit" class="find-btn">Find Groups</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Modal handling
        const searchBtn = document.getElementById('search-btn');
        const modalWrapper  = document.querySelector('.modal-wrapper');
        const closeBtn = document.querySelector('.close-btn');

        searchBtn.addEventListener('click', () => {
            modalWrapper .style.display='block';
        });

        closeBtn.addEventListener('click', () => {
            modalWrapper .style.display='none';
        });

        window.addEventListener('click', (event) => {
            const modalOvlay = document.getElementById('search-modal')
            if (event.target === modalWrapper ) {
                modalWrapper .style.display='none';
            }
            if(event.target === modalOvlay){
                modalWrapper.style.display='none';
            }
        });

        // Search/Filter logic
        document.getElementById('group-search-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form submission

            const fromValue = document.getElementById('from-location').value.toLowerCase();
            const toValue = document.getElementById('to-location').value.toLowerCase();
            const dateValue = document.getElementById('search-date').value;

            const groupCards = document.querySelectorAll('.group-card');

            groupCards.forEach(card => {
                const cardFrom = card.dataset.from.toLowerCase();
                const cardTo = card.dataset.to.toLowerCase();
                const cardDate = card.dataset.date;

                const fromMatch = fromValue === '' || cardFrom.includes(fromValue);
                const toMatch = toValue === '' || cardTo.includes(toValue);
                const dateMatch = dateValue === '' || cardDate === dateValue;

                if (fromMatch && toMatch && dateMatch) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });

            modalWrapper.style.display='none'; // Hide modal after search
        });
    </script>
</body>
</html>